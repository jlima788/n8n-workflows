{
  "createdAt": "2025-07-28T02:55:49.989Z",
  "updatedAt": "2025-07-31T12:59:50.279Z",
  "id": "zLJOXyZ7b7p8LwFi",
  "name": "CARROSSEL INSTAGRAM",
  "active": false,
  "isArchived": false,
  "nodes": [
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "2161bd1a-b382-41c0-bb92-736528130fab",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -480,
        0
      ],
      "id": "c86965bc-106a-4ac1-9b68-02188e14e89a",
      "name": "Webhook",
      "webhookId": "2161bd1a-b382-41c0-bb92-736528130fab"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list",
          "cachedResultName": "GPT-4.1-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "={{ $json.body.data.message.conversation }}"
            },
            {
              "content": "üéØ CONTEXTO GERAL\nYou are a world-class creative specialist in Instagram carousel design and visual storytelling.\n\nYour task is to generate highly detailed prompts ‚Äî one for each carousel card ‚Äî based on the topic and number of cards requested by the user via WhatsApp.\n\nThe final output must result in visually cohesive, emotionally engaging, and narratively structured carousel cards, designed for maximum engagement and conversion on Instagram.\n\nüß† OBJETIVO DO CONTE√öDO\nEach carousel must present high-quality content that:\n\nEduca, inspira ou entret√©m o leitor\n\nMant√©m o interesse at√© o final do carrossel\n\nLeva o usu√°rio √† a√ß√£o (comentar, compartilhar, seguir, salvar ou comprar)\n\nThe text inside the images should be claro, direto, com alto valor percebido.\nEvite frases gen√©ricas. Cada frase deve ter prop√≥sito e impacto.\n\nüñºÔ∏è IDENTIDADE VISUAL FIXA\nBrand: EstetiqueAura\nSegmento: Cl√≠nica de est√©tica facial e corporal\nEstilo visual: Luxuoso, feminino, moderno e clean\nPaleta de cores:\n\nPrincipal: Rosa antigo (#D9A5B3)\n\nSecund√°ria: Dourado suave (#E6C8A5)\n\nFundo: Branco rosado (#FFF8F6)\nTipografia:\n\nT√≠tulos: Playfair Display Bold, rosa antigo, tamanho grande\n\nTextos: Lato Regular, cinza escuro (#333333), tamanho m√©dio\n\n‚ö†Ô∏è Em todos os cards, essas caracter√≠sticas visuais devem ser repetidas e refor√ßadas.\n‚ö†Ô∏è O estilo visual, cores, fontes e espa√ßamento devem ser id√™nticos entre os cards.\n\nüìê FORMATO DA IMAGEM\nTamanho da imagem: 1024x1024 pixels (formato quadrado)\n\nMargem de seguran√ßa: m√≠nimo de 10% em todos os lados para texto e elementos\n\nHierarquia visual clara: t√≠tulo, imagem, texto complementar\n\nEmo√ß√£o transmitida: eleg√¢ncia, confian√ßa, bem-estar e cuidado\n\nüß± ESTRUTURA VISUAL DOS CARDS\nCard 1: Hook visual + textual\n\nDeve ser impactante, com texto curto e visual forte\n\nLayout mais livre e expressivo\n\nNo canto inferior esquerdo:\n‚Üí Texto: ‚ÄúArraste para o lado ‚Üí‚Äù\n‚Üí Fonte pequena Lato Regular, cor #D9A5B3, sem setas extras\n\nCards 2 at√© o pen√∫ltimo: Conte√∫do de valor\n\nVarie o formato: checklist, compara√ß√£o, dica, ilustra√ß√£o com legenda\n\nLayout fixo: t√≠tulo no topo, imagem central, texto explicativo abaixo\n\n√öltimo card: Conclus√£o / CTA leve\n\nPode conter uma frase inspiradora, refor√ßo da mensagem, ou convite sutil para a√ß√£o (ex: ‚ÄúSiga a EstetiqueAura para mais beleza e bem-estar‚Äù)\n\nüìö NARRATIVA APLICADA AOS CARDS\nO carrossel deve sempre conter:\n\nHook (Card 1)\n\nDesenvolvimento (Cards intermedi√°rios)\n\nFechamento com CTA (√öltimo Card)\n\n‚ö†Ô∏è Gere exatamente o n√∫mero de cards solicitado pelo usu√°rio via WhatsApp.\n‚ö†Ô∏è O conte√∫do de cada card deve fazer sentido sozinho e conectado aos demais.\n\nüì¶ FORMATO DA SA√çDA (OBRIGAT√ìRIO)\nA resposta final deve conter apenas o JSON com os prompts de imagem, como abaixo:\n\n{\n  \"Card 1\": \"Prompt altamente detalhado da imagem 1 aqui...\",\n  \"Card 2\": \"Prompt altamente detalhado da imagem 2 aqui...\",\n  ...\n}\n‚ö†Ô∏è Sem markdown, coment√°rios ou explica√ß√µes.\n‚ö†Ô∏è Cada valor (prompt) deve conter:\n\n\nTexto completo em portugu√™s que aparecer√° na imagem\n\nLocaliza√ß√£o de cada texto\n\nEstilo visual detalhado (ilustra√ß√£o, fonte, cores, emo√ß√µes)\n\nConfirma√ß√£o de tamanho e margens",
              "role": "assistant"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -272,
        0
      ],
      "id": "b14d308a-a388-4285-b03f-32cf91e2d4b6",
      "name": "Message a model",
      "credentials": {
        "openAiApi": {
          "id": "DJactF7wQNTfRMvR",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "jsCode": "const input = items[0].json.message.content;\n\nconst results = [];\n\nfor (const [key, value] of Object.entries(input)) {\n  results.push({\n    json: {\n      cardTitle: key,\n      prompt: value\n    }\n  });\n}\n\nreturn results;"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        80,
        0
      ],
      "id": "04f6348f-ef0b-4826-bdb6-59e44796f78f",
      "name": "Code"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.splitInBatches",
      "typeVersion": 3,
      "position": [
        96,
        240
      ],
      "id": "4d6a8358-c6fd-462f-9522-6616989a07d7",
      "name": "Loop Over Items"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.openai.com/v1/images/generations",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "openAiApi",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "model",
              "value": "gpt-image-1"
            },
            {
              "name": "prompt",
              "value": "={{ $json.prompt }}"
            },
            {
              "name": "size",
              "value": "1024x1024"
            },
            {
              "name": "quality",
              "value": "low"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        304,
        336
      ],
      "id": "5c25e53b-ce12-437b-a73d-181ff681b5e5",
      "name": "HTTP Request",
      "credentials": {
        "openAiApi": {
          "id": "DJactF7wQNTfRMvR",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "resource": "messages-api",
        "operation": "send-image",
        "instanceName": "automacao-ia",
        "remoteJid": "={{ $('Webhook').item.json.body.data.key.remoteJid }}",
        "media": "={{ $json.data[0].b64_json }}",
        "options_message": {}
      },
      "type": "n8n-nodes-evolution-api.evolutionApi",
      "typeVersion": 1,
      "position": [
        512,
        336
      ],
      "id": "be373080-ee90-4a3e-9f5c-84b7013d0ca8",
      "name": "Enviar imagem",
      "credentials": {
        "evolutionApi": {
          "id": "yGbknPBGtQEGp57A",
          "name": "Evolution account"
        }
      }
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        304,
        144
      ],
      "id": "892b9c58-3b64-4919-b23a-4256a42406f5",
      "name": "No Operation, do nothing"
    }
  ],
  "connections": {
    "Webhook": {
      "main": [
        [
          {
            "node": "Message a model",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Message a model": {
      "main": [
        [
          {
            "node": "Code",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Code": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Loop Over Items": {
      "main": [
        [
          {
            "node": "No Operation, do nothing",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Enviar imagem",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Enviar imagem": {
      "main": [
        [
          {
            "node": "Loop Over Items",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "meta": {
    "templateCredsSetupCompleted": true
  },
  "pinData": {},
  "versionId": "e328a62c-d970-46da-8905-bc76e49d2314",
  "triggerCount": 0,
  "shared": [
    {
      "createdAt": "2025-07-28T02:55:49.989Z",
      "updatedAt": "2025-07-28T02:55:49.989Z",
      "role": "workflow:owner",
      "workflowId": "zLJOXyZ7b7p8LwFi",
      "projectId": "W84J5ordzl059lka"
    }
  ],
  "tags": []
}